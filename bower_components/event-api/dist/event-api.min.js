!function(a){"use strict";var b={};!function(a){var b={};a.EventApiRegistry=b}(b),function(a){function b(){}b.prototype.events={},b.prototype.publish=function(a){if(null==a)throw"event not supplied.";var b=Array.prototype.slice.call(arguments,1);this.subscribers[a].map(function(a){a.cb.apply(this,b)})},b.prototype.on=function(a){if(null==a)throw"event not supplied.";var b=Object.create(null);return b.notify=function(b){if(null==b)throw"subscriber not supplied.";var c=Object.create(null);return c.byCalling=function(c){if(null==c||""===c)throw"methodName not supplied.";var d=b[c];if(void 0===d)throw"methodName not present on subscriber.";if("function"!=typeof d)throw"methodName not a function.";this.subscribers=this.subscribers||{},this.subscribers[a]=this.subscribers[a]||[],this.subscribers[a].find(function(a){return a.cb===d})||this.subscribers[a].push({name:b.constructor.name,cb:d})}.bind(this),c}.bind(this),b},a.EventApi=b}(b),function(a){function b(a,b,c){if(null==a||0===a.length)throw"connectCommands not supplied.";if(null==b)throw"apiRegistry not supplied.";c=c||{},c.initialApisToLoad=c.initialApisToLoad||[],this.connectCommands=a.reduce(function(a,b){if(null==b.subjectApiName)throw"connectCommand missing subjectApiName.";return a[b.subjectApiName]=b,a},{}),this.apiRegistry=b=c.initialApisToLoad.reduce(function(a,b){if(!b.constructor.name)throw"Required api.constructor.name property is empty.";return a[b.constructor.name]=b,a},{}),Object.getOwnPropertyNames(this.apiRegistry).map(function(a){var b=this.connectCommands[a];b&&b.run(this.apiRegistry)}.bind(this))}b.prototype.apis={},b.prototype.connectCommands={},b.prototype.loadApi=function(a){if(null==a)throw"api not supplied.";if(!a.constructor.name)throw"Required api.constructor.name property is empty.";var b=a.constructor.name;this.apiRegistry[b]=a;var c=this.connectCommands[b];c&&c.run(this.apiRegistry),Object.getOwnPropertyNames(this.connectCommands).map(function(c){var d=this.connectCommands[c];d.subjectApiName!==a.constructor.name&&(d.objectApiNames||[]).find(function(a){return a===b})&&this.apiRegistry[d.subjectApiName]&&d.run(this.apiRegistry)}.bind(this))},b.prototype.unloadApi=function(a){if(null==a||""===a)throw"apiName not supplied.";null!=this.apiRegistry[a]&&(Object.getOwnPropertyNames(this.apiRegistry).map(function(b){var c=this.apiRegistry[b];c.subscribers&&Object.getOwnPropertyNames(c.subscribers).map(function(b){c.subscribers[b]=c.subscribers[b].filter(function(b){return b.name!==a})})}.bind(this)),delete this.apiRegistry[a])},a.EventApiConnectionCoordinator=b}(b),"object"==typeof exports&&module?module.exports=b:"function"==typeof define&&define.amd?define(function(){return b}):a.eventApi=b}(window||global);