<!DOCTYPE html>
<html>
<head>
    <!--possibly need to maintain relative position and then apply absolute positioning once the transition has occurred.-->
    <style>
        body {
            margin: 0;
            padding: 0;
            position: absolute;
            top: 0;
            left: 0;
        }

        .flex {
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap;
            justify-content: flex-start;
            align-content: stretch;
            align-items: flex-start;
        }
        
        .absolute {
            position: absolute;
        }

        .transition-width {
            transition: width 2s ease-in-out;
        }

        .transition-margin {
            transition: margin 2s ease-in-out;
        }

        .transition-filter {
            transition: -webkit-filter 2s ease-in-out;
        }

        .transition-margin-width-filter {
            transition: margin 2s ease-in-out, width 2s ease-in-out, -webkit-filter 2s ease-in-out;
        }

        .flex-item {
            order: 0;
            flex: 0 1 auto;
            align-self: auto;
        }

        .red {
            box-shadow: 0 0 0 4px red inset;
        }

        .yellow {
            box-shadow: 0 0 0 4px yellow inset;
        }

        .green {
            box-shadow: 0 0 0 4px green inset;
        }

        .blue {
            box-shadow: 0 0 0 4px blue inset;
        }

        .orange {
            box-shadow: 0 0 0 4px orange inset;
        }

        .slate {
            box-shadow: 0 0 0 2px slategrey inset;
        }

        .inline-block {
            display: inline-block;
        }

        .height-100 {
            height: 100%;
        }

        .width-10 {
            width: 10px;
        }

        .width-100px {
            width: 100px;
        }

        .width-140 {
            width: 140px;
        }


        .width-300 {
            width: 300px;
        }

        .width-340 {
            width: 340px;
        }

        .overflow-visible {
            overflow: visible;
        }

        .overflow-scroll-x {
            overflow-x: scroll;
        }

        .overflow-scroll-y {
            overflow-y: scroll;
        }

        .fixed {
            position: fixed;
        }

        .left-100px {
            left:100px;
        }
        .top-100px {
            top:100px;
        }
        .bg-radial-white{
            background: -webkit-radial-gradient(center,ellipse cover,rgba(255,255,255,1) 0,rgba(255,255,255,.8) 81%,rgba(255,255,255,0) 100%);
        }

        .margin-left-140 {
            margin-left:140px;
        }

        .margin-left-300 {
            margin-left:300px;
        }

        .margin-left-340 {
            margin-left:340px;
        }
        .background-white-translucent {
            background: rgba(255,255,255,.95);
        }
        .background-linear-blue {
            background: -webkit-radial-gradient(center,ellipse cover, rgba(33,201,253,1) 0%,rgba(33,201,253,.7) 50%,rgba(27,83,238,0) 100%)
        }
        .background-linear-pink {
            background: -webkit-radial-gradient(center,ellipse cover, rgba(201,33,253,1) 0%,rgba(201,33,253,.7) 50%,rgba(83,27,238,0) 100%)
        }
        .blur {
            -webkit-filter:blur(20px);
            /*filter:blur(20px);*/
        }
        .z-index-1 {
            z-index: 1;
        }
        .z-index-9999 {
            z-index: 9999;
        }
        .padding-horizontal-20 {
            padding-left: 20px;
            padding-right: 20px;
        }
        .blur-temp {
            top: 0;
            padding: 0;
            margin: 0;
            height: 100%;
            display: inline-block;
            box-sizing: border-box;
        }
    </style>
    <title></title>
</head>
<body data-ui-mode="1" class="height-100 overflow-scroll-x flex" data-pinned-items-mode="0">
<article class="inline-block height-100 width-140 blue transition-width fixed sem-search-panel ">
    <article class="padding-horizontal-20">
        <p>search</p>
    </article>
</article><article class="inline-block height-100 width-140 blue transition-margin-width-filter margin-left-140 sem-first-non-search-item sem-result-list-panel">
    <article class="width-100px background-linear-pink height-100 absolute overflow-scroll-y padding-horizontal-20">
        <ol>
            <li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li>
            <li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li>
            <li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li>
            <li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li>
            <li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li>
            <li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li>
            <li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li>
            <li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li>
            <li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li>
            <li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li><li>result 1</li>
        </ol>
    </article>
</article><article class="inline-block height-100 width-10 flex-item transition-width z-index-1 sem-selected-item">
    <article class="width-100px background-white-translucent height-100 absolute overflow-scroll-y padding-horizontal-20">
        <p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p>
        <p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p>
        <p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p>
        <p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p>
        <p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p>
        <p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p>
        <p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p>
        <p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p>
        <p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p><p>selected item</p>
    </article>
</article><article class="inline-block height-100 width-10 flex-item transition-width sem-pinned-item">
    <article class="width-100px background-linear-blue height-100 absolute overflow-scroll-y padding-horizontal-20">
        <p>1</p>
    </article> <!--could conceivably insert a blur item here via js -->
</article><article class="inline-block height-100 width-10 flex-item transition-width sem-pinned-item">
    <article class="width-100px background-linear-blue height-100 absolute overflow-scroll-y padding-horizontal-20">
        <p>2</p>
    </article>
</article><nav class="fixed left-100px top-100px bg-radial-white z-index-9999">
    <button onclick="javascript:(function(){ document.querySelector('.sem-search-panel').style.width =  document.querySelector('.sem-search-panel').style.width === '10px' ? '140px'  : '10px'; document.querySelector('.sem-first-non-search-item').style.margin =  document.querySelector('.sem-first-non-search-item').style.margin === '0px 0px 0px 10px' ? '0px 0px 0px 140px' : '0px 0px 0px 10px';}())">set width of sp</button>
    <button onclick="javascript:(function(){ var el = document.querySelector('.sem-result-list-panel'); el.style.width =  el.style.width === '10px' ? '140px'  : '10px'; el.style.width === '10px' ? el.style['-webkit-filter'] = 'blur(20px)'  : el.style['-webkit-filter'] = 'blur(0)'; }())">set width of result list panel</button>
    <button onclick="javascript:(function(){
        var els = document.querySelectorAll('.sem-pinned-item, .sem-selected-item');
        var elsPinned = document.querySelectorAll('.sem-pinned-item');
        Array.prototype.slice.call(els, 0).map(function(el) {
            console.log('width: %s', el.clientWidth);
            el.style.width =  el.clientWidth === 10 ? '140px'  : '10px';
        });

        var currentMode = document.querySelector('body').getAttribute('data-pinned-items-mode');
        var newValue = (currentMode === '1') ? '0' : '1';
//        console.log('newValue: %s', newValue)
        document.querySelector('body').setAttribute('data-pinned-items-mode', newValue);
    }())">toggle pinned items</button>
</nav>
<script>
    window.addEventListener('resize', function(){
        if(document.querySelector('body').getAttribute('data-pinned-items-mode') === '0') {
            var els = document.querySelectorAll('.sem-pinned-item > article, .sem-selected-item > article');
            var newWidth = window.innerWidth - 140 - 140 - 60;
            Array.prototype.slice.call(els, 0).map(function(el) {
                newWidth = newWidth >= 100 ? newWidth : 100;
                el.style.width = newWidth+'px';
            });
        } else if (document.querySelector('body').getAttribute('data-pinned-items-mode') === '1') {
            var newWidth = 140;
            var numberOfItemsOfInterest = 3;
            if((140 + 140 + (140*numberOfItemsOfInterest)) < window.innerWidth) {
                newWidth = (window.innerWidth - 140 - 140)/numberOfItemsOfInterest;
            }

            var els = document.querySelectorAll('.sem-pinned-item, .sem-selected-item');
            console.log('window.innerWidth %s', window.innerWidth);
            console.log('newWidth %s', newWidth);

            Array.prototype.slice.call(els, 0).map(function(el) {
                console.log('setting width %s for: %s ', newWidth, el);
                newWidth = newWidth >= 140 ? newWidth : 140;
                console.log('FOO: %s', el.querySelector('article'));
                el.style.width = newWidth+'px';
                el.querySelector('article').style.width = (newWidth - 40) + 'px';
            });
        }
    });
</script>
</body>
</html>

<!--Selected item (and all the items in the stack of pinned items) is re-sized according to window size using javascript. Clicking the pinned items stack determines whether the pinned items can be fit in the viewport at default size. If so then they are apportioned a fair fraction of the space. If not their default sizes are used... and then the deck of pinned items is unshuffled.-->